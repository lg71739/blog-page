import{u as x,a as N,L as X,b as w,d as Y,c as J,G as H,e as Z,f as $,g as _,M as Q,S as ee}from"./app-beaab508.js";import{r as b,h as C,c as te,F as ae,J as le,o as se,C as ce,j as e,R,w as oe,p as ne,i as re}from"./framework-c23f4b14.js";const ie="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";const V=()=>e(H,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));V.displayName="CloseIcon";const j=()=>e(H,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));j.displayName="HeadingIcon";const W=()=>e(H,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));W.displayName="HeartIcon";const q=()=>e(H,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));q.displayName="HistoryIcon";const E=()=>e(H,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));E.displayName="TitleIcon";const ue={},pe=300,T=5,ve={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},de="search-pro-history-results",m=x(de,[]),he=()=>({history:m,addHistory:a=>{m.value.length<T?m.value=[a,...m.value]:m.value=[a,...m.value.slice(0,T-1)]},removeHistory:a=>{m.value=[...m.value.slice(0,a),...m.value.slice(a+1)]}}),ye=b(ie),fe=C(()=>JSON.parse(Z(ye.value))),M=(a,p)=>{const v=a.toLowerCase(),l=p.toLowerCase(),o=[];let s=0,u=0;const d=(t,h=!1)=>{let c="";u===0?c=t.length>20?`… ${t.slice(-20)}`:t:h?c=t.length+u>100?`${t.slice(0,100-u)}… `:t:c=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,c&&o.push(c),u+=c.length,h||(o.push(["strong",p]),u+=p.length,u>=100&&o.push(" …"))};let y=v.indexOf(l,s);if(y===-1)return null;for(;y>=0;){const t=y+l.length;if(d(a.slice(s,y)),s=t,u>100)break;y=v.indexOf(l,s)}return u<100&&d(a.slice(s),!0),o},K=a=>a.reduce((p,{type:v})=>p+(v==="title"?50:v==="heading"?20:v==="custom"?10:1),0),me=(a,p)=>{var v;const l={};for(const[o,s]of Q(p)){const u=((v=p[o.replace(/\/[^\\]*$/,"")])==null?void 0:v.title)||"",d=`${u?`${u} > `:""}${s.title}`,y=M(s.title,a);y&&(l[d]=[...l[d]||[],{type:"title",path:o,display:y}]),s.customFields&&Q(s.customFields).forEach(([t,h])=>{h.forEach(c=>{const n=M(c,a);n&&(l[d]=[...l[d]||[],{type:"custom",path:o,index:t,display:n}])})});for(const t of s.contents){const h=M(t.header,a);h&&(l[d]=[...l[d]||[],{type:"heading",path:o+(t.slug?`#${t.slug}`:""),display:h}]);for(const c of t.contents){const n=M(c,a);n&&(l[d]=[...l[d]||[],{type:"content",header:t.header,path:o+(t.slug?`#${t.slug}`:""),display:n}])}}}return ee(l).sort((o,s)=>K(l[o])-K(l[s])).map(o=>({title:o,contents:l[o]}))},Le=a=>{const p=N(),v=b([]),l=C(()=>fe.value[p.value]),o=$(s=>{v.value=s?me(s,l.value):[]},pe);return oe([a,p],()=>{o(a.value)}),v};var ge=te({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const v=_(),l=ae(),o=N(),s=X(ve),{history:u,addHistory:d,removeHistory:y}=he(),t=le(a,"query"),h=Le(t),c=b(0),n=b(0),D=b(),k=C(()=>h.value.length>0),O=C(()=>h.value[c.value]||null),z=()=>{c.value=c.value>0?c.value-1:h.value.length-1,n.value=O.value.contents.length-1},A=()=>{c.value=c.value<h.value.length-1?c.value+1:0,n.value=0},I=()=>{n.value<O.value.contents.length-1?n.value=n.value+1:A()},P=()=>{n.value>0?n.value=n.value-1:z()},F=r=>r.map(i=>re(i)?i:e(i[0],i[1])),B=r=>{if(r.type==="custom"){const i=ue[r.index]||"$content",[L,g=""]=ne(i)?i[o.value].split("$content"):i.split("$content");return F([L,...r.display,g])}return F(r.display)},U=()=>{c.value=0,n.value=0,p("updateQuery",""),p("close")};return se(()=>{w("keydown",r=>{if(k.value){if(r.key==="ArrowUp")P();else if(r.key==="ArrowDown")I();else if(r.key==="Enter"){const i=O.value.contents[n.value];v.value.path!==i.path&&(d(i),l.push(i.path),U())}}}),Y(D.value,{reserveScrollBarGap:!0})}),ce(()=>{J()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!k.value}],ref:D},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},s.value.history),u.value.map((r,i)=>e(R,{to:r.path,class:["search-pro-result-item",{active:n.value===i}],onClick:()=>{U()}},()=>[e(q,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",B(r))]),e("button",{class:"search-pro-close-icon",onClick:L=>{L.preventDefault(),L.stopPropagation(),y(i)}},e(V))]))])):s.value.emptyHistory:k.value?e("ul",{class:"search-pro-result-list"},h.value.map(({title:r,contents:i},L)=>{const g=c.value===L;return e("li",{class:["search-pro-result-list-item",{active:g}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((f,S)=>{const G=g&&n.value===S;return e(R,{to:f.path,class:["search-pro-result-item",{active:G,"aria-selected":G}],onClick:()=>{d(f),U()}},()=>[f.type==="content"?null:e(f.type==="title"?E:f.type==="heading"?j:W,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[f.type==="content"&&f.header?e("div",{class:"content-header"},f.header):null,e("div",B(f))])])})])})):s.value.emptyResult)}});export{ge as default};
